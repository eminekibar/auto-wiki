name: Otomatik Wiki Jenerat繹r羹

# 1. TET襤KLEY襤C襤: Ne zaman 癟al覺acak?
on:
  pull_request:
    types:
      - closed # PR kapat覺ld覺覺nda tetikle

# 2. GREVLER: Neler yap覺lacak?
jobs:
  update-changelog:
    # Sadece PR "Merge" edilerek kapat覺ld覺ysa 癟al覺 (襤ptal edildiyse 癟al覺ma)
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest # Robotumuzun 癟al覺aca覺 sanal makine
    
    # 襤zinler: Robotun dosyaya yaz覺p commit atabilmesi i癟in yetki veriyoruz
    permissions:
      contents: write

    steps:
      # Ad覺m A: Projenin kodlar覺n覺 sanal makineye indir
      - name: Kodu 襤ndir (Checkout)
        uses: actions/checkout@v3
        with:
          ref: ${{ github.base_ref }}

      # Ad覺m B: PR detaylar覺n覺 al ve CHANGELOG.md dosyas覺na yaz
      - name: CHANGELOG'u G羹ncelle
        run: |
          echo "## Yeni Eklenti: ${{ github.event.pull_request.title }}" >> CHANGELOG.md
          echo "**Tarih:** $(date +'%d-%m-%Y')" >> CHANGELOG.md
          echo "**A癟覺klama:** ${{ github.event.pull_request.body }}" >> CHANGELOG.md
          echo "---" >> CHANGELOG.md

      # Ad覺m C: Deien CHANGELOG.md dosyas覺n覺 otomatik olarak Git'e kaydet
      - name: Deiiklikleri Git'e Kaydet (Auto-Commit)
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "docs: PR detaylar覺 CHANGELOG'a otomatik eklendi "